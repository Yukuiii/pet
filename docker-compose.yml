services:
  backend:
    build:
      context: ./pet-backend
      dockerfile: Dockerfile
    environment:
      SPRING_DATASOURCE_URL: ${SPRING_DATASOURCE_URL:-jdbc:mysql://host.docker.internal:3306/pet?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai}
      SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME:-root}
      SPRING_DATASOURCE_PASSWORD: ${SPRING_DATASOURCE_PASSWORD:-root}
      APP_UPLOAD_DIR: ${APP_UPLOAD_DIR:-/data/uploads}
    ports:
      - "8080:8080"
    volumes:
      - pet_uploads:/data/uploads

volumes:
  pet_uploads:
